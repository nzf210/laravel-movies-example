import{_ as T}from"./Head.vue_vue_type_script_setup_true_lang-CNttGprF.js";import{_ as W}from"./Index.vue_vue_type_script_setup_true_lang-BxMzbrMy.js";import{u as b,g as z,o as D,c as L,r as l,w as P,a as $,b as N,d as G,e as j,f as h,h as m,i as g,F as C,j as M,k as _,l as o,m as q,n as E,p as V,t as B,q as I}from"./app-DGGDSzQS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";function H(e){return z()?(D(e),!0):!1}function F(e){return typeof e=="function"?e():b(e)}const R=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const U=e=>e!=null,x=()=>{};function y(e){var s;const r=F(e);return(s=r==null?void 0:r.$el)!=null?s:r}const Y=R?window:void 0;function J(){const e=l(!1);return $()&&N(()=>{e.value=!0}),e}function K(e){const s=J();return L(()=>(s.value,!!e()))}function Q(e,s,r={}){const{root:u,rootMargin:p="0px",threshold:f=.1,window:c=Y,immediate:d=!0}=r,v=K(()=>c&&"IntersectionObserver"in c),w=L(()=>{const i=F(e);return(Array.isArray(i)?i:[i]).map(y).filter(U)});let a=x;const t=l(d),k=v.value?P(()=>[w.value,y(u),t.value],([i,O])=>{if(a(),!t.value||!i.length)return;const S=new IntersectionObserver(s,{root:y(O),rootMargin:p,threshold:f});i.forEach(A=>A&&S.observe(A)),a=()=>{S.disconnect(),a=x}},{immediate:d,flush:"post"}):x,n=()=>{a(),k(),t.value=!1};return H(n),{isSupported:v,isActive:t,pause(){a(),t.value=!1},resume(){t.value=!0},stop:n}}const X={class:"container mx-auto px-4 py-16"},Z={class:"popular-actors"},ee=o("h2",{class:"uppercase tracking-wider text-orange-500 text-lg font-semibold"},"Popular Actors",-1),te={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8"},oe={class:"actor mt-8"},se=["src","alt"],re={class:"mt-2"},ne={class:"text-sm truncate text-gray-400"},ae={key:0,type:"button",class:"text-white flex p-2 rounded-md",disabled:""},le=o("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),pe=G({__name:"Index",props:{data:{}},setup(e){const s=e,r=l(s.data.popularActors),u=l(s.data.next),p=l(null),f=l(!1),c=l(!1),d=l(!0),v=async()=>{if(!(c.value||!u.value||f.value))try{c.value=!0,M.get(route("actors.page",{page:u.value}),{},{preserveState:!0,preserveScroll:!0,onSuccess:t=>{r.value.push(...t.props.data.popularActors),u.value=t.props.data.next,t.props.data.next||(f.value=!0,w())},onFinish:()=>{c.value=!1}})}catch(t){console.error("Error fetching more actors:",t)}},{stop:w}=Q(p,async([{isIntersecting:t}])=>{if(d.value){d.value=!1;return}t&&await v()},{threshold:.5}),a=()=>{window.scrollY===0&&M.replace(route("actors.index"))};return N(()=>{window.addEventListener("scroll",a)}),j(()=>{window.removeEventListener("scroll",a)}),(t,k)=>(_(),h(C,null,[m(T,{title:"Actors - The Movies"}),m(W,null,{default:g(()=>[o("div",X,[o("div",Z,[ee,o("div",te,[r.value.length>0?(_(!0),h(C,{key:0},q(r.value,n=>(_(),h("div",oe,[m(b(E),{href:t.route("actors.show",n.id)},{default:g(()=>[o("img",{src:n.profile_path,alt:n.name,class:"hover:opacity-75 transition ease-in-out duration-150"},null,8,se)]),_:2},1032,["href"]),o("div",re,[m(b(E),{href:t.route("actors.show",n.id),class:"text-lg hover:text-gray-300"},{default:g(()=>[V(B(n.name),1)]),_:2},1032,["href"]),o("div",ne,B(n.known_for),1)])]))),256)):I("",!0),o("div",{ref_key:"el",ref:p,class:"infinite-scroll-sizer"},null,512)])]),c.value?(_(),h("button",ae,[le,V(" Loading ... ")])):I("",!0)])]),_:1})],64))}});export{pe as default};
